### 第三章 常用命令
<br>

#### 数值操作：`math`
+ 命令构成：
  ```cmake
  math(EXPR <var> "<str>" [OUTPUT_FORMAT <格式选项>])
  ```
  + 作用：计算`<str>`中的数学表达式结果，并将结果放到`<var>`内
  + 结果格式可通过可选参数`<格式选项>`指定
    + `HEXADECIMAL`：十六进制
    + `DECIMAL`：十进制
  + 运算符与 C 语言相同
  + 数值与计算结果都必须是一个64位有符号整数可表示的
<br>

#### 字符串操作：`string`
##### 搜索与替换
+ 搜索字符串
  ```cmake
  string(FIND <str> <substr> <var> [REVERSE])
  ```
  + `REVERSE`：指定自后向前搜索
  + 当查找内容不存在时，`<var>`将为`-1`
+ 替换字符串
  ```cmake
  string(REPLACE <substr><rep_str>
    <var>
  <str>[<str>...])
  ```
<br>

##### 正则匹配和替换
+ 正则表达式语法：
  ![](https://res.weread.qq.com/wrepub/CB_3300091899_5ZcAMEGSi5q801H9ec29.jpg)
  + 例子：匹配 `a+b`：
    ```cmake
    set(regex [[\(a\+b\)]])
    set(regex "\\(a\\+b\\)")
    ```
    + 第一种方法不转义时表现为`\(a\+b\)`，之后转义为`(a+b)`
    + 第二种方法因为是引号变量，需要先转义`\`，因此需要替代`\`为`\`
+ 单次正则匹配：
  ```cmake
  string(
    REGEX MATCH <正则表达式>
    <var>
    <str>[<str>...]
  )
  ```
+ 全部正则匹配：
  ```cmake
  string(
    REGEX MATCHALL <正则表达式>
    <var>
    <str> [<str>...]
  )
  ```
+ 正则替换
  ```cmake
  string(
    REGEX REPLACE <正则表达式>
    <替换表达式> <var>
    <str> [<str>...]
  )
  ```
  + 在`<替换表达式>`中，可以通过`\1~\9`分别引用第1个~第9个子表达式的匹配结果
    + 而`\0`表示匹配到完整字符串
+ 捕获组变量
  + 捕获组（`capture group`）即正则表达式中子表达式匹配的结果
  + 捕获组可以在正则替换表达式中通过反斜杠语法访问
  + 相关的预定义变量如下：
    + `CMAKE_MATCH_COUNT`代表捕获组的数量
    + `CMAKE_MATCH_<n>`代表第 n 个捕获组的匹配内容，当n为 0 时，值为正则匹配的完整结果而非子表达式的匹配结果
<br>

##### 取字符串长度
+ 代码：
  ```cmake
  string(LENGTH <str> <var>)
  ```
<br>

##### 字符串变换
+ 追加字符串：
  ```cmake
  string(APPEND <var> [<str>...])
  ```
+ 前插字符串：
  ```cmake
  string(CONCAT <var> [<str>...])
  ```

##### 分隔符连接